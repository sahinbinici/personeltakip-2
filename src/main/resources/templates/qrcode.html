<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Kod - Gaziantep Ãœniversitesi Personel Takip Sistemi</title>
    <link rel="stylesheet" th:href="@{/css/qrcode.css}">
</head>
<body>
    <div class="container">
        <div class="qrcode-card">
            <div class="header">
                <img src="/images/gaun-logo.png" alt="Gaziantep Ãœniversitesi Logo" class="university-logo">
                <h1>Gaziantep Ãœniversitesi</h1>
                <h2 class="system-title">GÃ¼nlÃ¼k QR Kod</h2>
                <p class="subtitle">Daily QR Code</p>
                <button id="logoutBtn" class="btn-logout">Ã‡Ä±kÄ±ÅŸ Yap</button>
            </div>

            <div class="user-info" id="userInfo">
                <p><strong>HoÅŸ geldiniz,</strong> <span id="userName"></span></p>
                <p class="user-tc">TC: <span id="userTc"></span></p>
                <div class="user-status" id="userStatus">
                    <span class="status-indicator" id="statusIndicator">ğŸ”„</span>
                    <span class="status-text" id="statusText">Durum yÃ¼kleniyor...</span>
                </div>
            </div>

            <div class="qrcode-container" id="qrcodeContainer">
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>QR kod yÃ¼kleniyor...</p>
                </div>

                <div class="qrcode-content" id="qrcodeContent" style="display: none;">
                    <div class="qrcode-image-wrapper">
                        <img id="qrcodeImage" alt="QR Code" class="qrcode-image">
                    </div>

                    <div class="qrcode-info">
                        <div class="info-row">
                            <span class="info-label">GeÃ§erlilik Tarihi:</span>
                            <span class="info-value" id="validDate"></span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">KullanÄ±m SayÄ±sÄ±:</span>
                            <span class="info-value">
                                <span id="usageCount">0</span> / <span id="maxUsage">2</span>
                            </span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Durum:</span>
                            <span class="info-value status" id="status">Aktif</span>
                        </div>
                    </div>

                    <div class="usage-indicator">
                        <div class="usage-bar">
                            <div class="usage-bar-fill" id="usageBarFill"></div>
                        </div>
                        <p class="usage-text" id="usageText">GiriÅŸ ve Ã§Ä±kÄ±ÅŸ iÃ§in kullanÄ±labilir</p>
                    </div>

                    <button id="refreshBtn" class="btn btn-secondary">
                        <span class="btn-text">Yenile</span>
                        <span class="spinner-small" style="display: none;"></span>
                    </button>
                </div>

                <div class="error-container" id="errorContainer" style="display: none;">
                    <div class="error-icon">âš ï¸</div>
                    <p class="error-message" id="errorMessage"></p>
                    <button id="retryBtn" class="btn btn-primary">Tekrar Dene</button>
                </div>
            </div>

            <div class="info-box">
                <h3>KullanÄ±m Bilgisi</h3>
                <ul>
                    <li>QR kod her gÃ¼n otomatik olarak yenilenir</li>
                    <li>Her QR kod gÃ¼nde en fazla 2 kez kullanÄ±labilir (1 giriÅŸ, 1 Ã§Ä±kÄ±ÅŸ)</li>
                    <li>Gece yarÄ±sÄ±nda yeni QR kod oluÅŸturulur</li>
                    <li>QR kodu mobil uygulamada okutarak giriÅŸ/Ã§Ä±kÄ±ÅŸ kaydÄ± yapabilirsiniz</li>
                </ul>
            </div>
        </div>
    </div>

    <script th:src="@{/js/qrcode.js}"></script>
</body>
</html>
