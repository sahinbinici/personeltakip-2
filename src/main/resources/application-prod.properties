# Production Environment Configuration

# Database - Local (use environment variables)
spring.datasource.url=jdbc:mysql://${DB_HOST}:3306/${DB_NAME}?useSSL=true&serverTimezone=UTC
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# Database - External (use environment variables)
external.datasource.url=jdbc:mysql://${EXTERNAL_DB_HOST}:3306/${EXTERNAL_DB_NAME}?useSSL=true&serverTimezone=UTC
external.datasource.username=${EXTERNAL_DB_USERNAME}
external.datasource.password=${EXTERNAL_DB_PASSWORD}
external.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# External JPA/Hibernate Configuration
external.jpa.hibernate.ddl-auto=validate

# JPA - Never auto-update schema in production
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false

# JWT - Must use strong secret from environment (REQUIRED)
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:1800000}
jwt.issuer=${JWT_ISSUER:personnel-tracking-system}

# SMS Gateway - Production configuration
sms.gateway.url=${SMS_GATEWAY_URL}
sms.gateway.api-key=${SMS_GATEWAY_API_KEY}
sms.gateway.sender=${SMS_SENDER_ID}

# Logging - Less verbose in production
logging.level.root=WARN
logging.level.com.bidb.personetakip=INFO
logging.level.org.springframework.security=WARN

# SSL/HTTPS - Required in production (MUST be enabled)
server.ssl.enabled=true
server.ssl.key-store=${SSL_KEYSTORE_PATH}
server.ssl.key-store-password=${SSL_KEYSTORE_PASSWORD}
server.ssl.key-store-type=PKCS12
server.ssl.protocol=TLS
server.ssl.enabled-protocols=TLSv1.2,TLSv1.3

# Force HTTPS on port 8443
server.port=8443

# Redirect HTTP to HTTPS
server.http.port=8080

# CORS - Restrict to specific origins in production (REQUIRED)
cors.allowed-origins=${CORS_ALLOWED_ORIGINS}
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=Authorization,Content-Type,Accept,X-Requested-With
cors.allow-credentials=true
cors.max-age=3600

# Thymeleaf caching enabled
spring.thymeleaf.cache=true

# Error handling - Don't expose details
server.error.include-stacktrace=never
server.error.include-exception=false
